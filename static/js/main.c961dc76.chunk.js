(this["webpackJsonpchallenge-books-front-end"]=this["webpackJsonpchallenge-books-front-end"]||[]).push([[0],{23:function(e,t,s){},33:function(e,t,s){},35:function(e,t,s){},36:function(e,t,s){},37:function(e,t,s){},38:function(e,t,s){},39:function(e,t,s){},40:function(e,t,s){},41:function(e,t,s){},42:function(e,t,s){"use strict";s.r(t);var c=s(1),n=s.n(c),a=s(16),i=s.n(a),r=s(7),o=s(2),l=s.p+"static/media/notFound.5cbf8af1.svg",j=s.p+"static/media/black-logo.6e859b40.svg",b=s.p+"static/media/logOut.3265ae02.svg",d=(s(23),s(0)),u=function(e){var t=e.user,s=void 0===t?"Infelizmente, algo deu errado!":t,c=e.wellcome,n=void 0===c?"":c,a=Object(o.g)();return Object(d.jsxs)("header",{children:[Object(d.jsxs)("div",{className:"header-logo",children:[Object(d.jsx)("img",{src:j,alt:"Ioasys black logo"}),Object(d.jsx)("span",{children:"Books"})]}),Object(d.jsxs)("div",{className:"header-wellcome",children:[Object(d.jsxs)("p",{children:[n," ",Object(d.jsx)("span",{children:s})]}),Object(d.jsx)("button",{type:"button",onClick:function(){a.push("/login"),localStorage.removeItem("token")},children:Object(d.jsx)("img",{src:b,alt:"Log Out"})})]})]})},h=(s(33),function(){return Object(d.jsxs)("div",{className:"not-found-body",children:[Object(d.jsx)(u,{}),Object(d.jsx)("div",{className:"not-found",children:Object(d.jsx)("img",{src:l,alt:"Not Found"})})]})}),O=s(10),p=function(e){return!!localStorage.getItem("token")?Object(d.jsx)(o.b,Object(O.a)({},e)):Object(d.jsx)(o.a,{to:"/login"})},x=s(6),m=s.n(x),g=s(8),v=s(11),f=s(3),k=function(){var e=Object(g.a)(m.a.mark((function e(t,s){var c,n,a,i,r,o,l;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=t,n=s,a={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:c,password:n})},i="https://books.ioasys.com.br/api/v1/auth/sign-in",e.prev=4,e.next=7,fetch(i,a);case 7:return r=e.sent,e.next=10,r.json();case 10:return o=e.sent,localStorage.setItem("refresh-token",r.headers.get("refresh-token")),localStorage.setItem("token",r.headers.get("Authorization")),e.abrupt("return",o);case 16:return e.prev=16,e.t0=e.catch(4),e.next=20,fetch(i,a);case 20:return l=e.sent,e.abrupt("return",console.log(l.status));case 22:case"end":return e.stop()}}),e,null,[[4,16]])})));return function(t,s){return e.apply(this,arguments)}}(),N=k,y=s.p+"static/media/erro.3a01eda2.svg",S=(s(35),function(){var e=Object(c.useState)({login:"",pass:""}),t=Object(f.a)(e,2),s=t[0],n=t[1],a=Object(c.useState)(!1),i=Object(f.a)(a,2),r=i[0],l=i[1],j=Object(o.g)(),b=function(e){var t=e.target,c=t.name,a=t.value;n(Object(O.a)(Object(O.a)({},s),{},Object(v.a)({},c,a)))},u=function(){var e=Object(g.a)(m.a.mark((function e(){var t,c,n,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.login,c=s.pass,n="Infelizmente, algo deu errado.",e.next=4,N(t,c);case 4:if((a=e.sent).email){e.next=7;break}return e.abrupt("return",l(!0));case 7:if(a.email||a.errors.message!==n){e.next=9;break}return e.abrupt("return",j.push("*"));case 9:return e.abrupt("return",j.push("/",{params:a.name}));case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(d.jsx)("div",{className:"form",children:Object(d.jsxs)("form",{action:"",children:[Object(d.jsxs)("label",{htmlFor:"email",children:[Object(d.jsx)("span",{children:"Email"}),Object(d.jsx)("input",{type:"email",value:s.login,name:"login",id:"email",onChange:b})]}),Object(d.jsxs)("label",{className:"password-label",htmlFor:"password",children:[Object(d.jsxs)("div",{className:"pass",children:[Object(d.jsx)("span",{children:"Senha"}),Object(d.jsx)("input",{type:"password",value:s.pass,name:"pass",onChange:b,id:"password"})]}),Object(d.jsx)("button",{type:"submit",onClick:function(e){e.preventDefault(),u()},children:"Enviar"})]}),r&&Object(d.jsx)("img",{src:y,className:"error-message",alt:"Erro message by email or password"})]})})}),w=s.p+"static/media/white-logo.f413c8a1.svg",P=(s(36),function(){return Object(d.jsx)("div",{className:"login-background",children:Object(d.jsxs)("div",{className:"form-body",children:[Object(d.jsxs)("div",{className:"form-header",children:[Object(d.jsx)("img",{src:w,alt:"Ioasys white logo"}),Object(d.jsx)("span",{children:"Books"})]}),Object(d.jsx)(S,{})]})})}),C=(s(37),function(e){var t=e.book;return Object(d.jsxs)("div",{className:"book-card",children:[Object(d.jsx)("div",{className:"book-img",children:Object(d.jsx)("img",{src:t.imageUrl,alt:"Book title ".concat(t.title)})}),Object(d.jsxs)("div",{className:"book-information",children:[Object(d.jsxs)("div",{className:"title-and-author",children:[Object(d.jsx)("h1",{children:t.title}),t.authors.map((function(e){return Object(d.jsx)("h2",{children:e},"".concat(e," ").concat(t.title))}))]}),Object(d.jsxs)("div",{className:"book-description",children:[Object(d.jsxs)("p",{children:[t.pageCount," paginas"]}),Object(d.jsxs)("p",{children:["Editora ",t.publisher]}),Object(d.jsxs)("p",{children:["Publicado em ",t.published]})]})]})]})}),I=s.p+"static/media/quotes.73438b98.svg",E=(s(38),function(e){var t=e.book,s=e.closeDetails,c=e.setPosition,n=e.setwidth;return Object(d.jsxs)("div",{className:"book-details",children:[Object(d.jsx)("div",{className:"details-button",children:Object(d.jsx)("button",{type:"button",onClick:function(){s(!1),c("relative"),n("auto")},children:"X"})}),Object(d.jsxs)("div",{className:"main-details",children:[Object(d.jsx)("div",{className:"details-book-img",children:Object(d.jsx)("img",{src:t.imageUrl,alt:"Book img ".concat(t.title)})}),Object(d.jsxs)("div",{className:"details",children:[Object(d.jsxs)("div",{className:"book-title",children:[Object(d.jsx)("h1",{children:t.title}),t.authors.map((function(e){return Object(d.jsx)("h2",{children:e},"".concat(e," ").concat(t.title))}))]}),Object(d.jsxs)("div",{className:"informaction",children:[Object(d.jsx)("p",{children:"INFORMA\xc7\xd5ES"}),Object(d.jsxs)("div",{className:"content-information",children:[Object(d.jsxs)("div",{children:[Object(d.jsx)("p",{children:"Pagina"}),Object(d.jsx)("span",{children:"".concat(t.pageCount," p\xe1ginas")})]}),Object(d.jsxs)("div",{children:[Object(d.jsx)("p",{children:"editora"}),Object(d.jsx)("span",{children:"Editora: ".concat(t.publisher)})]}),Object(d.jsxs)("div",{children:[Object(d.jsx)("p",{children:"public\xe3o"}),Object(d.jsx)("span",{children:t.published})]}),Object(d.jsxs)("div",{children:[Object(d.jsx)("p",{children:"idioma"}),Object(d.jsx)("span",{children:t.language})]}),Object(d.jsxs)("div",{children:[Object(d.jsx)("p",{children:"titulo"}),Object(d.jsx)("span",{children:t.title})]}),Object(d.jsxs)("div",{children:[Object(d.jsx)("p",{children:"ISBN-10"}),Object(d.jsx)("span",{children:t.isbn10})]}),Object(d.jsxs)("div",{children:[Object(d.jsx)("p",{children:"ISBN-13"}),Object(d.jsx)("span",{children:t.isbn13})]})]})]}),Object(d.jsxs)("div",{className:"review",children:[Object(d.jsx)("p",{children:"RESENHA DA EDITORA"}),Object(d.jsxs)("p",{children:[Object(d.jsx)("span",{children:Object(d.jsx)("img",{src:I,alt:"Quotes"})}),Object(d.jsx)("span",{children:t.description})]})]})]})]})]})}),B=function(e){var t=e.page,s=e.allPages,c=e.previousDisabled,n=e.handleClickPreviousPage,a=e.nextDisabled,i=e.handleClickNextPage;return Object(d.jsxs)("div",{className:"change-page",children:[Object(d.jsxs)("p",{children:["Pagina ",Object(d.jsx)("span",{children:t})," de",Object(d.jsx)("span",{children:" ".concat(s)})]}),Object(d.jsx)("button",{className:"previous",type:"button",disabled:c,onClick:n,children:"<"}),Object(d.jsx)("button",{className:"next",type:"button",disabled:a,onClick:i,children:">"})]})},D=(s(39),function(e){var t=e.books,s=void 0===t?[]:t,n=e.allPages,a=e.page,i=e.setPage,r=Object(c.useState)(!1),o=Object(f.a)(r,2),l=o[0],j=o[1],b=Object(c.useState)("relative"),u=Object(f.a)(b,2),h=u[0],O=u[1],p=Object(c.useState)("auto"),x=Object(f.a)(p,2),m=x[0],g=x[1],v=Object(c.useState)({}),k=Object(f.a)(v,2),N=k[0],y=k[1],S=a,w=Object(c.useState)(!0),P=Object(f.a)(w,2),I=P[0],D=P[1],A=Object(c.useState)(!1),F=Object(f.a)(A,2),T=F[0],z=F[1];return Object(d.jsxs)("main",{children:[Object(d.jsx)("div",{className:"main-content",style:{position:h,width:m},children:s.map((function(e){return Object(d.jsx)("button",{type:"button",onClick:function(){return function(e){j(!0),O("fixed"),g("86%"),y(e)}(e)},children:Object(d.jsx)(C,{book:e})},e.id)}))}),Object(d.jsx)(B,{page:a,allPages:n,previousDisabled:I,handleClickPreviousPage:function(){S<=2&&D(!0),S>1&&z(!1),i(S-1)},nextDisabled:T,handleClickNextPage:function(){i(S+1),S>=n-1&&z(!0),S<=n&&D(!1)}}),l&&Object(d.jsx)(E,{book:N,closeDetails:j,setPosition:O,setwidth:g})]})}),A=function(){var e=Object(g.a)(m.a.mark((function e(t){var s,c,n,a,i;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=localStorage.getItem("token")||null,c={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)}},n="https://books.ioasys.com.br/api/v1/books?page=".concat(t,"&amount=12&category=biographies"),e.next=5,fetch(n,c);case 5:return a=e.sent,e.next=8,a.json();case 8:return i=e.sent,e.abrupt("return",i);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F=A,T=(s(40),function(){var e=Object(o.g)(),t=Object(o.h)(),s=Object(c.useState)([]),n=Object(f.a)(s,2),a=n[0],i=n[1],r=Object(c.useState)(1),l=Object(f.a)(r,2),j=l[0],b=l[1],h=Object(c.useState)(1),O=Object(f.a)(h,2),p=O[0],x=O[1];return Object(c.useEffect)((function(){F(p).then((function(e){var t=e.data,s=e.totalPages,c=e.page;i(t),x(c),b(s.toFixed(0))}))}),[p]),Object(d.jsxs)("div",{className:"home",children:[Object(d.jsx)(u,{wellcome:"Bem vindo,",user:t.state.params}),a?Object(d.jsx)(D,{books:a,allPages:j,page:p,setPage:x}):e.push("/login")]})}),z=function(){return Object(d.jsxs)(o.d,{children:[Object(d.jsx)(o.b,{exact:!0,path:"/login",component:P}),Object(d.jsx)(p,{exact:!0,path:"/",component:T}),Object(d.jsx)(o.b,{exact:!0,path:"*",component:h})]})},J=(s(41),function(){return Object(d.jsx)("div",{className:"App",children:Object(d.jsx)(r.a,{children:Object(d.jsx)(z,{})})})});i.a.render(Object(d.jsx)(n.a.StrictMode,{children:Object(d.jsx)(J,{})}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.c961dc76.chunk.js.map